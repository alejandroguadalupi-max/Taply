<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1" />
  <meta name="theme-color" content="#0b0f1a" />
  <title>Taply ‚Äî Sube la valoraci√≥n de tu negocio sin esfuerzo</title>
  <meta name="description" content="S√© un im√°n de clientes con Taply: m√°s y mejores rese√±as online con tecnolog√≠a NFC. Convierte opiniones positivas en rese√±as de Google y aprende de las negativas.">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0f1a; --bg-2:#0e1424; --txt:#e9eefc; --muted:#94a3b8;
      --brand-1:#00d4ff; --brand-2:#7c3aed; --blue-1:#38bdf8; --blue-2:#2563eb;
      --radius:20px; --shadow:0 10px 30px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.04);
      --arrowSize:56px; --edgePad:calc(var(--arrowSize) + 36px);

      /* Unificaci√≥n con suscripciones.html */
      --border: rgba(255,255,255,.10);
      --header-padding-y: 14px;
      --header-blur: 10px;
      --logo-size: 34px;
    }
    *{box-sizing:border-box}
    html{-webkit-text-size-adjust:100%}
    html,body{margin:0;height:100%;scroll-behavior:smooth}
    body{
      font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:var(--bg); color:var(--txt);
      opacity:0; transform:translateY(4px);
      transition:opacity .35s ease, transform .35s ease;
    }
    body.is-loaded{opacity:1;transform:none}
    a{color:inherit;text-decoration:none}

    /* === Contenedor igual que suscripciones === */
    .container{max-width:1100px;width:92%;margin-inline:auto}

    body::before{content:"";position:fixed;inset:0;z-index:-1;pointer-events:none;background-image:radial-gradient(rgba(255,255,255,.08) 1px, transparent 1.6px);background-size:26px 26px;opacity:.12}

    /* === Header calcado === */
    header{
      position:sticky;top:0;z-index:60;
      background:#0a0f16cc;
      border-bottom:1px solid var(--border);
      backdrop-filter:blur(var(--header-blur));
    }
    .nav{display:flex;align-items:center;justify-content:space-between;padding:var(--header-padding-y) 0; position:relative}
    .brand{display:flex;gap:8px;align-items:center;font-weight:800;letter-spacing:.3px}
    .logo-img{
      width:var(--logo-size);height:var(--logo-size);
      border-radius:10px;object-fit:cover;display:block;
    }
    .nav-links{display:flex;gap:18px;align-items:center}
    .ghost{padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.12);color:var(--txt);touch-action:manipulation}
    .menu{display:none}

    /* Cuenta */
    .acct-chip{display:inline-flex;align-items:center;gap:10px;padding:8px 12px;border:1px solid rgba(255,255,255,.14);border-radius:999px;background:rgba(255,255,255,.04);cursor:pointer}
    .acct-avatar{width:28px;height:28px;border-radius:999px;background:linear-gradient(135deg,var(--brand-1),var(--brand-2));display:grid;place-items:center;font-weight:800;color:#061017}
    .acct-dd{position:relative}
    .acct-menu{position:absolute;right:0;top:110%;min-width:220px;background:#0b0f1a;border:1px solid rgba(255,255,255,.12);border-radius:14px;box-shadow:var(--shadow);display:none;padding:6px}
    .acct-menu a,.acct-menu button{display:flex;width:100%;text-align:left;background:transparent;border:0;color:inherit;padding:10px 12px;border-radius:10px;cursor:pointer}
    .acct-menu a:hover,.acct-menu button:hover{background:rgba(255,255,255,.06)}
    .acct-dd.open .acct-menu{display:block}

    .mobile-menu{position:absolute; left:0; right:0; top:100%; display:none; padding:14px; background:#0b0f1a; border-top:1px solid rgba(255,255,255,.08); box-shadow:0 16px 40px rgba(0,0,0,.45)}
    .mobile-links{display:flex;flex-direction:column;gap:10px}
    .mobile-links .ghost{background:rgba(255,255,255,.02); border-color:rgba(255,255,255,.18)}
    .mobile-links .btn{width:100%; justify-content:center}

    .btn{
      --p:14px 18px; background:linear-gradient(135deg,var(--brand-1),var(--brand-2));
      color:#061017;font-weight:700;border:0;border-radius:999px;cursor:pointer;touch-action:manipulation;
      padding:var(--p);display:inline-flex;align-items:center;gap:8px;
      box-shadow:0 10px 30px rgba(124,58,237,.35), 0 4px 14px rgba(0,212,255,.25);
      position:relative; overflow:hidden; transform:translateZ(0);
      transition:transform .15s ease, box-shadow .2s ease, filter .2s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover{ transform:translateY(-2px) }
    .btn:active{ transform:translateY(0); filter:saturate(1.1) }
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,.12);color:var(--txt);box-shadow:none}
    .btn-google{background:#db4437;color:#fff}
    .btn-google:hover{filter:brightness(.95)}

    /* ===== Hero (sin duplicados) ===== */
    .hero{padding:64px 0 40px; text-align:center; position:relative; overflow:hidden}
    .hero-grid{display:grid;grid-template-columns:1fr;gap:18px;justify-items:center}
    h1,h2,h3,p{ text-align:center }
    h1{font-size:clamp(2rem,4.5vw,3.2rem);line-height:1.1;margin:10px 0 6px}
    #hero-title{
      background:linear-gradient(90deg,#00d4ff,#7c3aed,#22d3ee);
      background-size:200% 100%;
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      animation:titleGradient 8s linear infinite;
      text-shadow:0 1px 0 rgba(0,0,0,.2);
    }
    @keyframes titleGradient{0%{background-position:0% 50%}100%{background-position:200% 50%}}
    .hero::before{
      content:"";
      position:absolute; inset:0; pointer-events:none;
      background:
        radial-gradient(1.8px 1.8px at 18% 20%, rgba(255,255,255,.95), transparent 60%),
        radial-gradient(1.6px 1.6px at 30% 12%, rgba(255,255,255,.90), transparent 60%),
        radial-gradient(1.6px 1.6px at 42% 26%, rgba(255,255,255,.85), transparent 60%),
        radial-gradient(1.4px 1.4px at 55% 16%, rgba(255,255,255,.85), transparent 60%),
        radial-gradient(1.2px 1.2px at 62% 28%, rgba(255,255,255,.80), transparent 60%),
        radial-gradient(1.2px 1.2px at 71% 22%, rgba(255,255,255,.80), transparent 60%),
        radial-gradient(1.2px 1.2px at 78% 30%, rgba(255,255,255,.80), transparent 60%),
        radial-gradient(1.8px 1.8px at 84% 18%, rgba(255,255,255,.95), transparent 60%),
        radial-gradient(1.4px 1.4px at 12% 32%, rgba(255,255,255,.85), transparent 60%),
        radial-gradient(1.2px 1.2px at 25% 34%, rgba(255,255,255,.80), transparent 60%),
        radial-gradient(1.2px 1.2px at 48% 34%, rgba(255,255,255,.78), transparent 60%),
        radial-gradient(1.4px 1.4px at 66% 34%, rgba(255,255,255,.85), transparent 60%);
      filter: drop-shadow(0 0 6px rgba(255,255,255,.18));
      mask-image: linear-gradient(to bottom, black 36%, transparent 75%);
      opacity:.95;
    }
    .lead{color:var(--muted);font-size:1.05rem;max-width:900px;margin:0 auto}
    .cta-row{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-top:18px}
    .pills{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:10px}
    .pill{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);padding:10px 14px;border-radius:999px}

    section{padding:56px 0}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{background:var(--bg-2);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);text-align:center}
    .card h3{margin:.2rem 0 .6rem}
    .card p{color:var(--muted);margin:0}

    /* Reviews / carrusel */
    .reviews{position:relative;margin:36px 0}
    .reviews h2{margin:0 0 14px}
    .reviews-window{position:relative; overflow:visible}
    .reviews-track{
      display:flex;gap:22px;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;
      padding:0 var(--edgePad);scroll-padding:0 var(--edgePad);scrollbar-width:none;
      overscroll-behavior-x: contain; touch-action: pan-x;
    }
    .reviews-track::-webkit-scrollbar{display:none}

    .review-card{
      flex:0 0 clamp(320px, 86vw, 520px);
      max-width:520px;
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
      border:1px solid rgba(255,255,255,.1);
      border-radius:16px;padding:20px;scroll-snap-align:center;scroll-snap-stop:always;
      text-align:left;box-shadow:0 20px 50px rgba(0,0,0,.35);
    }
    .review-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}
    .review-avatar{width:54px;height:54px;border-radius:999px;overflow:hidden;flex:0 0 54px;border:1px solid rgba(255,255,255,.14);box-shadow:0 10px 22px rgba(124,58,237,.25)}
    .review-name{font-weight:700}
    .review-stars{color:#fbbf24;font-size:18px;letter-spacing:2px}
    .review-text{color:#c9d3e6;margin:6px 0 12px}

    .carousel-btn{
      position:absolute;top:50%;transform:translateY(-50%);
      width:var(--arrowSize);height:var(--arrowSize);border-radius:999px;border:0;
      background:linear-gradient(135deg,var(--blue-1),var(--blue-2));color:#fff;cursor:pointer;
      display:grid;place-items:center;box-shadow:0 10px 30px rgba(37,99,235,.45),0 6px 18px rgba(56,189,248,.35);
      transition:filter .2s ease, transform .1s ease; z-index:2;
    }
    .carousel-btn:hover{ filter:brightness(1.1) }
    .carousel-btn:active{ transform:translateY(-50%) scale(.98) }
    .carousel-btn.left{left:10px}
    .carousel-btn.right{right:10px}
    .carousel-btn span{font-size:clamp(20px,3.8vw,26px);line-height:1}

    input,select,textarea,button{font-size:16px}
    :focus-visible{outline:2px solid #7c3aed; outline-offset:2px; border-radius:8px}

    @media (max-width: 768px){
      :root{ --arrowSize:42px; --edgePad:calc(var(--arrowSize) + 44px); }
      section{padding:48px 0}
      header{background:#0a0f16}
      .grid-3{grid-template-columns:1fr}
      .nav-links{display:none}
      .menu{
        display:block;background:#0f172a;color:#e9eefc;border:1px solid rgba(255,255,255,.28);
        box-shadow:0 8px 24px rgba(0,0,0,.45);padding:10px 14px;border-radius:999px;touch-action:manipulation;
      }
      .menu:hover{filter:brightness(1.08)}
      .menu:active{transform:translateY(1px)}
      .carousel-btn.left{ left:-6px; transform:translate(-8%, -50%); }
      .carousel-btn.right{ right:-6px; transform:translate(8%, -50%); }
    }
    @media (max-width:480px){
      :root{ --arrowSize:38px; --edgePad:calc(var(--arrowSize) + 48px); }
      .carousel-btn span{ font-size:18px }
      .reviews-track{ padding:0 var(--edgePad); }
      .carousel-btn.left{ left:-8px; transform:translate(-10%, -50%); }
      .carousel-btn.right{ right:-8px; transform:translate(10%, -50%); }
    }
    @media (prefers-reduced-motion: reduce){ *{animation:none!important;transition:none!important} }

    /* ===== MODAL ACCESO (id√©ntico a suscripciones.html) ===== */
    #acct-modal.acct-hidden{display:none!important}
    #acct-modal{position:fixed;inset:0;background:rgba(6,10,18,.65);backdrop-filter:blur(8px);display:grid;place-items:center;z-index:1000}
    .acct-dialog{
      width:min(560px,92%); max-height:90vh; overflow:auto;
      background:var(--bg-2); border:1px solid rgba(255,255,255,.10); border-radius:20px; box-shadow:var(--shadow);
      padding:0; color:var(--txt)
    }
    .acct-cover{background:linear-gradient(135deg,var(--brand-1),var(--brand-2));height:6px;width:100%}
    .acct-body{padding:22px}
    .acct-head{display:flex;justify-content:center;align-items:center;margin:10px 0 18px}
    .acct-logo{
      width:48px; height:48px; border-radius:16px; display:block;
      background:url('img/logo.png') center/cover no-repeat; box-shadow:var(--shadow);
      color:transparent; font-size:0; line-height:0;
    }
    .acct-title{margin:10px 0 0;text-align:center;font-weight:800;font-size:1.25rem}
    .acct-sub{margin:6px 0 0;text-align:center;color:var(--muted);font-size:.96rem}
    .acct-tabs{display:flex;gap:8px;margin:16px auto 12px;justify-content:center}
    .acct-tabs .acct-tab{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);border-radius:999px;padding:8px 14px;cursor:pointer;color:inherit;font-weight:700}
    .acct-tabs .acct-tab.acct-tab-active{background:linear-gradient(135deg,var(--brand-1),var(--brand-2)); color:#061017}

    .acct-form{display:grid;gap:12px;margin-top:6px}
    .acct-label{font-weight:600}
    .acct-input{position:relative}
    .acct-input input{
      width:100%;background:#0a0f16;border:1px solid rgba(255,255,255,.14);color:inherit;border-radius:12px;padding:12px 42px 12px 12px;font-size:16px;
      transition:border .2s, box-shadow .2s
    }
    .acct-input input:focus{outline:none;border-color:rgba(0,212,255,.45); box-shadow:0 0 0 3px rgba(0,212,255,.25),0 0 0 6px rgba(124,58,237,.18)}
    .toggle-eye{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:transparent;border:0;color:#cfe3ff;cursor:pointer}
    .acct-err{color:#ef4444;margin-top:2px}
    .acct-ok{color:#22c55e;margin-top:2px}
    .acct-row{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
    .acct-actions{display:grid;gap:10px}
    .acct-small{color:var(--muted);margin:0}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="brand" href="index.html" aria-label="Inicio" style="display:flex;align-items:center;gap:8px;color:inherit">
        <img src="img/logo.png" alt="Taply" class="logo-img" width="34" height="34" loading="eager">
        <span>Taply</span>
      </a>

      <nav class="nav-links">
        <a class="ghost" href="suscripciones.html">Suscripciones</a>
        <a class="btn" href="suscripciones.html">¬°Comenzar ahora!</a>
        <span id="acct-nav-slot" class="acct-dd"></span>
      </nav>

      <button class="menu ghost" id="menuBtn" aria-expanded="false" aria-controls="mobileMenu">Men√∫</button>
    </div>

    <div class="container mobile-menu" id="mobileMenu" role="menu" aria-label="Men√∫ m√≥vil">
      <div class="mobile-links">
        <a class="ghost" href="suscripciones.html" role="menuitem">Suscripciones</a>
        <a class="btn" href="suscripciones.html" role="menuitem">¬°Comenzar ahora!</a>
        <span id="acct-nav-slot-mobile" class="acct-dd" style="margin-top:8px"></span>
      </div>
    </div>
  </header>

  <main>
    <section class="hero" aria-labelledby="hero-title">
      <div class="container hero-grid">
        <div>
          <h1 id="hero-title">¬øImagina subir la valoraci√≥n de su negocio <em>SIN HACER NADA</em>?</h1>
          <br>
          <p class="lead">Aumente sus rese√±as, proteja su reputaci√≥n y convierta opiniones en m√°s clientes y m√°s ingresos, sin mover un solo dedo.</p>
          <div class="cta-row">
            <a class="btn" href="suscripciones.html">Ver suscripciones</a>
          </div>
        </div>
      </div>
    </section>

    <section id="como-funciona">
      <div class="container"><h2>¬øC√≥mo funciona Taply?</h2></div>
      <div class="container grid-3">
        <div class="card"><h3>1) Acerca el m√≥vil</h3><p>Coloque los dispositivos <strong>NFC</strong> en sus mesas. Al acercar el cliente el m√≥vil, aparece la pantalla de valoraci√≥n.</p></div>
        <div class="card"><h3>2) Enrutado inteligente</h3><p>Dicha pantalla de valoraci√≥n recomienda a los clientes dejar su rese√±a en google si es positiva, y en formulario privado si es negativa. Al pulsar cada opci√≥n, la web te guiar√° a dejar tu rese√±a.</p></div>
        <div class="card"><h3>3) Formulario privado</h3><p>Lo elaboramos adaptado a su negocio (tiempos, atenci√≥n, calidad‚Ä¶). Eso ya lo hablamos mano a mano por WhatsApp una vez comprados los NFC y p√†gada una suscripci√≥n. Adem√°s, lo conectamos a una hoja privada donde se guardan todas las respuestas de los clientes.</p></div>
        <div class="card"><h3>4) Aprende y mejora</h3><p>Consulte la hoja cuando quiera: tendr√° gr√°ficos con los problemas m√°s comunes, podr√° filtrar las rese√±as por fechas... En Taply nos mejoramos d√≠a a d√≠a para integrar nuevas funcionalidades √∫tiles para el negocio.</p></div>
        <div class="card"><h3>5) Todo suma</h3><p>M√°s y mejores valoraciones elevan su visibilidad en el buscador, aumentan la confianza y atraen m√°s clientes.</p></div>
      </div>
    </section>

    <section id="beneficios">
      <div class="container">
        <h2>¬øQu√© podr√° conseguir gracias a nuestro sistema?</h2>
        <style>
          .lead.justify{
            text-align: justify;
            text-justify: inter-word;
            -webkit-hyphens: auto;
            -ms-hyphens: auto;
            hyphens: auto;
            max-width: 900px;
            line-height: 1.6;
            margin: 0 auto;
          }
          @media (max-width: 480px){
            .lead.justify{ padding-left:14px; padding-right:14px; line-height:1.7; }
          }
        </style>

        <p class="lead justify">
          En <strong>Taply</strong> le ayudamos a <strong>multiplicar sus rese√±as</strong>, atraer <strong>muchos m√°s clientes</strong> y, como resultado, <strong>aumentar sus ingresos</strong>.
          Nuestro sistema impulsa la <strong>valoraci√≥n global</strong>: si la experiencia es positiva, animamos a rese√±ar en <strong>Google</strong>; si no lo es, ofrecemos un <strong>formulario privado</strong> para gestionarlo sin afectar tu puntuaci√≥n p√∫blica.
          As√≠ su negocio <strong>gana visibilidad</strong>, escala posiciones y todo de forma <strong>legal, transparente y realista</strong>.
        </p>

        <div class="cta-row"><a class="btn" href="suscripciones.html">Empezar ahora</a></div>
      </div>
    </section>

    <!-- RESE√ëAS -->
    <section class="reviews" id="reviews" aria-labelledby="reviews-title">
      <div class="container">
        <h2 id="reviews-title">Valorado 4,8/5 por m√°s de 30 negocios</h2>

        <div class="reviews-window">
          <button class="carousel-btn left" id="revPrev" aria-label="Opini√≥n anterior"><span>‚Äπ</span></button>
          <button class="carousel-btn right" id="revNext" aria-label="Opini√≥n siguiente"><span>‚Ä∫</span></button>

          <div class="reviews-track" id="reviewsTrack" tabindex="0" aria-label="Opiniones de clientes">
            <article class="review-card"><div class="review-header"><div class="review-avatar"><img loading="lazy" src="https://i.pravatar.cc/110?img=26" alt="Lucia" width="54" height="54"></div><div><div class="review-name">Sara</div><div class="review-stars" aria-label="5 de 5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div></div></div><p class="review-text">Instalaci√≥n en 5 minutos. Los avisos de rese√±as negativas nos han permitido corregir fallos en d√≠as.</p></article>
            <article class="review-card"><div class="review-header"><div class="review-avatar"><img loading="lazy" src="https://i.pravatar.cc/110?img=33" alt="Marlon" width="54" height="54"></div><div><div class="review-name">Marlon</div><div class="review-stars" aria-label="5 de 5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div></div></div><p class="review-text">Ahorra tiempo en reputaci√≥n online. Muy f√°cil para el cliente.</p></article>
            <article class="review-card"><div class="review-header"><div class="review-avatar"><img loading="lazy" src="https://i.pravatar.cc/110?img=12" alt="Joan" width="54" height="54"></div><div><div class="review-name">Joan</div><div class="review-stars" aria-label="5 de 5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div></div></div><p class="review-text">Subimos rese√±as sin pedirlo. El gr√°fico con los problemas m√°s comunes nos ha ayudado a mejorar procesos.</p></article>
            <article class="review-card"><div class="review-header"><div class="review-avatar"><img loading="lazy" src="https://i.pravatar.cc/110?img=5" alt="Sara" width="54" height="54"></div><div><div class="review-name">Luc√≠a</div><div class="review-stars" aria-label="5 de 5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div></div></div><p class="review-text">Nunca hab√≠a conseguido tantas rese√±as reales tan r√°pido. El flujo NFC es comod√≠simo.</p></article>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- ===== MODAL ACCESO ===== -->
  <div id="acct-modal" class="acct-hidden" role="dialog" aria-modal="true" aria-labelledby="acct-title">
    <div class="acct-dialog">
      <div class="acct-cover"></div>
      <div class="acct-body">
        <div class="acct-head"><div class="acct-logo">‚åÅ</div></div>
        <h3 id="acct-title" class="acct-title">Inicia sesi√≥n en tu cuenta</h3>
        <p id="acct-sub" class="acct-sub">Introduce tus datos de acceso o crea una cuenta nueva.</p>

        <div class="acct-tabs" role="tablist">
          <button class="acct-tab acct-tab-active" data-tab="login" role="tab" aria-selected="true">Iniciar sesi√≥n</button>
          <button class="acct-tab" data-tab="register" role="tab" aria-selected="false">Registrarse</button>
        </div>

        <!-- LOGIN -->
        <form id="acct-form-login" class="acct-form" autocomplete="on" novalidate>
          <label class="acct-label">Correo
            <span class="acct-input">
              <input id="acct-login-email" type="email" required autocomplete="email" inputmode="email" placeholder="tucorreo@ejemplo.com">
            </span>
          </label>
          <label class="acct-label">Contrase√±a
            <span class="acct-input">
              <input id="acct-login-pass" type="password" required autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
              <button type="button" class="toggle-eye" data-toggle="#acct-login-pass" aria-label="Mostrar u ocultar contrase√±a">üëÅ</button>
            </span>
          </label>

          <div class="acct-row">
            <label class="remember"><input type="checkbox" checked> Mantener sesi√≥n activa</label>
            <button type="button" id="link-forgot" class="acct-tab" style="background:transparent;border:1px dashed rgba(255,255,255,.18);cursor:pointer">¬øOlvidaste la contrase√±a?</button>
          </div>

          <div class="acct-actions">
            <button type="submit" class="btn">Iniciar sesi√≥n</button>
            <a id="btn-google-login" href="/api/google?from=login" class="btn btn-google" rel="nofollow noopener noreferrer">Continuar con Google</a>
            <p id="acct-error-login" class="acct-err" style="display:none"></p>
            <button type="button" id="acct-resend-login" class="btn ghost" style="display:none">Reenviar verificaci√≥n</button>
          </div>
        </form>

        <!-- REGISTER -->
        <form id="acct-form-register" class="acct-form" style="display:none" autocomplete="on" novalidate>
          <label class="acct-label">Nombre
            <span class="acct-input"><input id="acct-reg-name" type="text" required autocomplete="name" placeholder="Nombre y apellidos"></span>
          </label>
          <label class="acct-label">Correo
            <span class="acct-input"><input id="acct-reg-email" type="email" required autocomplete="email" inputmode="email" placeholder="tucorreo@ejemplo.com"></span>
          </label>
          <label class="acct-label">Contrase√±a
            <span class="acct-input">
              <input id="acct-reg-pass" type="password" required minlength="6" autocomplete="new-password" placeholder="M√≠nimo 6 caracteres">
              <button type="button" class="toggle-eye" data-toggle="#acct-reg-pass">üëÅ</button>
            </span>
          </label>
          <label class="acct-label">Confirmar contrase√±a
            <span class="acct-input">
              <input id="acct-reg-pass2" type="password" required minlength="6" autocomplete="new-password" placeholder="Repite la contrase√±a">
              <button type="button" class="toggle-eye" data-toggle="#acct-reg-pass2">üëÅ</button>
            </span>
          </label>
          <div class="meter" aria-hidden="true"><i id="pw-meter" style="display:block;height:6px;border-radius:6px;background:#1f2937;width:0"></i></div>
          <div class="acct-actions">
            <button type="submit" class="btn">Crear cuenta</button>
            <a id="btn-google-register" href="/api/google?from=register" class="btn btn-google" rel="nofollow noopener noreferrer">Registrarme con Google</a>
            <p id="acct-ok-register" class="acct-ok" style="display:none"></p>
            <p id="acct-error-register" class="acct-err" style="display:none"></p>
            <button type="button" id="acct-resend-register" class="btn ghost" style="display:none">Reenviar verificaci√≥n</button>
          </div>
        </form>

        <!-- RECOVER -->
        <form id="acct-form-recover" class="acct-form" style="display:none" autocomplete="on" novalidate>
          <p class="acct-small">Te enviaremos un enlace para restablecer tu contrase√±a.</p>
          <label class="acct-label">Correo
            <span class="acct-input"><input id="acct-recover-email" type="email" autocomplete="email" inputmode="email" placeholder="tucorreo@ejemplo.com"></span>
          </label>
          <div class="acct-actions">
            <button type="submit" class="btn">Enviar enlace</button>
            <button type="button" class="btn ghost" id="recover-back">Volver</button>
            <p id="acct-info-recover" class="acct-ok" style="display:none"></p>
            <p id="acct-error-recover" class="acct-err" style="display:none"></p>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- PARTE 2/2: el bloque <script> va aqu√≠ -->
    <!-- FOOTER REDES SOCIALES (estilo Taply) -->
<footer class="footer-social">
  <p class="footer-text">
    Si tiene cualquier duda o desea un v√≠deo explicativo, cont√°ctenos:
  </p>
  <div class="social-icons">
    <!-- Instagram -->
    <a href="https://www.instagram.com/taply.es/" target="_blank" rel="noopener" aria-label="Instagram">
      <i class="fab fa-instagram"></i>
    </a>
    <!-- WhatsApp -->
    <a href="https://wa.me/34683611328" target="_blank" rel="noopener" aria-label="WhatsApp">
      <i class="fab fa-whatsapp"></i>
    </a>
  </div>
</footer>

<!-- Font Awesome para los √≠conos -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
  .footer-social{
    /* Usa tu segunda capa y un sutil degradado para integrarlo */
    background:
      linear-gradient(180deg, rgba(255,255,255,.015), rgba(255,255,255,.005)) ,
      var(--bg-2, #0e1424);
    border-top: 1px solid var(--border, rgba(255,255,255,.10));
    padding: 26px 0 30px;
    text-align: center;
  }
  .footer-text{
    color: rgba(233,238,252,.9); /* --txt con ligera opacidad */
    font-size: .98rem;
    letter-spacing: .2px;
    margin: 0 0 14px;
  }
  .social-icons{
    display: flex;
    justify-content: center;
    gap: 14px;
  }
  .social-icons a{
    width: 40px;
    height: 40px;
    border-radius: 999px;
    display: grid;
    place-items: center;
    color: rgba(233,238,252,.9);
    border: 1px solid rgba(255,255,255,.16);
    background: rgba(255,255,255,.03);
    font-size: 1.1rem;
    transition: transform .2s ease, box-shadow .25s ease, border-color .25s ease, background .25s ease, color .25s ease;
  }
  .social-icons a:hover{
    /* Hover sutil con tu gradiente de marca como glow */
    background: rgba(255,255,255,.06);
    border-color: rgba(255,255,255,.28);
    color: #fff;
    transform: translateY(-1px);
    box-shadow:
      0 0 18px rgba(124,58,237,.25),   /* --brand-2 */
      0 0 12px rgba(0,212,255,.22);    /* --brand-1 */
  }
</style>

</body>
<script>
  // Animaci√≥n de entrada
  window.addEventListener('load', () => document.body.classList.add('is-loaded'));

  /* ===== Men√∫ m√≥vil ===== */
  (function(){
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    menuBtn?.addEventListener('click', () => {
      const open = mobileMenu.style.display === 'block';
      mobileMenu.style.display = open ? 'none' : 'block';
      menuBtn.setAttribute('aria-expanded', String(!open));
    });
    mobileMenu?.addEventListener('click', (e) => {
      const a = e.target.closest('a');
      if (a) {
        mobileMenu.style.display = 'none';
        menuBtn.setAttribute('aria-expanded','false');
      }
    });
    window.addEventListener('resize', () => {
      if (window.innerWidth > 768) {
        mobileMenu.style.display='none';
        menuBtn.setAttribute('aria-expanded','false');
      }
    });
  })();

  /* ===== Carrusel de rese√±as ===== */
  (function(){
    const track = document.getElementById('reviewsTrack');
    const prev  = document.getElementById('revPrev');
    const next  = document.getElementById('revNext');
    if(!track) return;

    const cards = () => Array.from(track.querySelectorAll('.review-card'));
    const centerX = () => track.scrollLeft + track.clientWidth/2;

    function nearestIndex(){
      const cx = centerX();
      let best = 0, dist = Infinity;
      cards().forEach((el,i) => {
        const mid = el.offsetLeft + el.clientWidth/2;
        const d = Math.abs(mid - cx);
        if(d < dist){ dist = d; best = i; }
      });
      return best;
    }
    function scrollToIndex(i){
      const arr = cards();
      if(!arr.length) return;
      i = Math.max(0, Math.min(arr.length-1, i));
      const el = arr[i];
      const x = el.offsetLeft - (track.clientWidth - el.clientWidth)/2;
      track.scrollTo({ left:x, behavior:'smooth' });
    }
    const step = d => scrollToIndex(nearestIndex()+d);

    prev?.addEventListener('click', () => step(-1));
    next?.addEventListener('click', () => step(1));
    track.addEventListener('keydown', (e) => {
      if(e.key === 'ArrowLeft') step(-1);
      else if(e.key === 'ArrowRight') step(1);
    });

    let t;
    track.addEventListener('scroll', () => {
      clearTimeout(t);
      t = setTimeout(() => scrollToIndex(nearestIndex()), 120);
    }, {passive:true});
  })();

  /* ====== Acceso / Registro (id√©ntico a suscripciones.html) ====== */
  (function(){
    const S = { user:null, polling:null };

    const $  = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    const modal = $('#acct-modal');

    const forms = {
      login:    $('#acct-form-login'),
      register: $('#acct-form-register'),
      recover:  $('#acct-form-recover')
    };
    const errs = {
      login:    $('#acct-error-login'),
      register: $('#acct-error-register'),
      recover:  $('#acct-error-recover')
    };
    const okRegister = $('#acct-ok-register');
    const okRecover  = $('#acct-info-recover');

    const resendLoginBtn    = $('#acct-resend-login');
    const resendRegisterBtn = $('#acct-resend-register');

    /* ===== Historial (hash) ===== */
    const AUTH_HASHES = ['#auth-login','#auth-register','#auth-recover'];
    function pushAuthState(tab){ history.pushState({auth:true, tab}, '', '#auth-' + tab); }
    function cleanAuthHash(){
      if (AUTH_HASHES.includes(location.hash)) {
        history.replaceState(null, '', location.pathname + location.search);
      }
    }
    window.addEventListener('popstate', (e) => {
      if(e.state && e.state.auth){
        setTab(e.state.tab, true);
        if(modal.classList.contains('acct-hidden')) modal.classList.remove('acct-hidden');
      }else{
        closeModal(true);
      }
    });

    /* ===== Tabs ===== */
    function setTab(name, fromHistory=false){
      forms.login.style.display    = name==='login'    ? 'grid' : 'none';
      forms.register.style.display = name==='register' ? 'grid' : 'none';
      forms.recover.style.display  = name==='recover'  ? 'grid' : 'none';

      $$('#acct-modal .acct-tabs .acct-tab').forEach(b=>{
        const on = b.dataset.tab === name;
        b.classList.toggle('acct-tab-active', on);
        b.setAttribute('aria-selected', String(on));
      });

      if(name === 'login'){
        $('#acct-title').textContent = 'Inicia sesi√≥n en tu cuenta';
        $('#acct-sub').textContent   = 'Introduce tus datos de acceso o crea una cuenta nueva.';
      }
      if(name === 'register'){
        $('#acct-title').textContent = 'Crea tu cuenta ahora mismo';
        $('#acct-sub').textContent   = 'Completa tus datos para registrarte en Taply.';
      }
      if(name === 'recover'){
        $('#acct-title').textContent = 'Recuperar contrase√±a';
        $('#acct-sub').textContent   = 'Te enviaremos un enlace a tu correo para restablecerla.';
      }
      if(!fromHistory) pushAuthState(name);
    }
    function openModal(tab='login'){
      modal.classList.remove('acct-hidden');
      setTab(tab);
      setTimeout(()=>$('#acct-login-email')?.focus(), 40);
    }
    function closeModal(fromHistory=false){
      modal.classList.add('acct-hidden');
      Object.values(errs).forEach(e => e&&(e.style.display='none'));
      okRegister.style.display='none';
      okRecover.style.display='none';
      resendLoginBtn.style.display='none';
      resendRegisterBtn.style.display='none';
      if(!fromHistory) cleanAuthHash();
    }

    document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeModal(); });
    modal.addEventListener('click', e => { if(e.target === modal) closeModal(); });
    $$('#acct-modal .acct-tabs .acct-tab').forEach(b => b.addEventListener('click', () => setTab(b.dataset.tab)));
    $('#link-forgot')?.addEventListener('click', () => setTab('recover'));
    $('#recover-back')?.addEventListener('click', () => setTab('login'));

    /* ===== Mostrar/Ocultar contrase√±as ===== */
    $$('.toggle-eye').forEach(btn => btn.addEventListener('click', () => {
      const sel = btn.getAttribute('data-toggle');
      const input = document.querySelector(sel);
      if(!input) return;
      input.type = input.type === 'password' ? 'text' : 'password';
    }));

    /* ===== Medidor de contrase√±a ===== */
    const meter = $('#pw-meter');
    $('#acct-reg-pass')?.addEventListener('input', e => {
      const v = e.target.value || '';
      let score = 0;
      if(v.length>=6) score+=33;
      if(/[A-Z]/.test(v)&&/[a-z]/.test(v)) score+=33;
      if(/\d/.test(v)||/[^A-Za-z0-9]/.test(v)) score+=34;
      if(meter){
        meter.style.width = Math.min(100, score) + '%';
        meter.style.background = score>80 ? '#22c55e' : score>50 ? '#f59e0b' : '#ef4444';
      }
    });

    /* ===== Helper API (id√©ntico) ===== */
    async function api(method, url, body){
      const res = await fetch(url, {
        method,
        headers:{'Content-Type':'application/json'},
        credentials:'include',
        cache:'no-store',
        body: body ? JSON.stringify(body) : undefined
      });
      let data=null; try{ data=await res.json(); }catch{}
      if(!res.ok){
        const err = new Error(data?.message || `HTTP ${res.status}`);
        err.code = data?.error || 'http_error';
        err.fieldErrors = data?.fieldErrors || null;
        throw err;
      }
      return data;
    }

    /* ===== Estado de usuario en nav ===== */
    function setUser(u){
      S.user = u || null;
      try{ localStorage.setItem('acct_user', u ? JSON.stringify(u) : ""); }catch{}
      window.taplyAuth = window.taplyAuth || {};
      window.taplyAuth.user = S.user;
      paintNav();
    }

    function paintNav(){
      const slots = ['#acct-nav-slot','#acct-nav-slot-mobile'].map(s=>document.querySelector(s)).filter(Boolean);
      slots.forEach(slot=>{
        if(!S.user){
          slot.classList.remove('open');
          slot.innerHTML = `<button id="acct-open-nav" class="btn" style="--p:10px 14px">Iniciar sesi√≥n</button>`;
          slot.querySelector('#acct-open-nav')?.addEventListener('click', ()=> openModal('login'));
          return;
        }
        const name=(S.user?.name||S.user?.email||'Mi cuenta').split(' ')[0];
        const initials=(name?.[0]||'T').toUpperCase();
        slot.innerHTML = `
          <div class="acct-chip" id="acct-chip" role="button" aria-haspopup="true" aria-expanded="false">
            <span class="acct-avatar">${initials}</span>
            <strong>${name}</strong>
          </div>
          <div class="acct-menu" role="menu">
            <button id="acct-logout-btn" role="menuitem">Cerrar sesi√≥n</button>
          </div>`;
        const dd=slot, chip=dd.querySelector('#acct-chip');
        chip?.addEventListener('click', ()=>{
          dd.classList.toggle('open');
          chip.setAttribute('aria-expanded', dd.classList.contains('open') ? 'true' : 'false');
        });
        document.addEventListener('click', (e)=>{ if(!dd.contains(e.target)) dd.classList.remove('open'); });
        dd.querySelector('#acct-logout-btn')?.addEventListener('click', async ()=>{
          try{ await api('POST','/api/logout',{});}catch{}
          setUser(null);
          alert('Sesi√≥n cerrada');
        });
      });
    }

    /* ===== Submit: Recuperar ===== */
    forms.recover?.addEventListener('submit', async e=>{
      e.preventDefault();
      errs.recover.style.display='none'; okRecover.style.display='none';
      const email = $('#acct-recover-email').value.trim();
      try{
        await api('POST','/api/request-password-reset',{email});
        okRecover.textContent='Si el correo est√° registrado, te hemos enviado un enlace (caduca en 1 hora).';
        okRecover.style.display='block';
      }catch(err){
        errs.recover.textContent = err.message || String(err.code||err);
        errs.recover.style.display='block';
      }
    });

    /* ===== Submit: Login ===== */
    forms.login?.addEventListener('submit', async e=>{
      e.preventDefault();
      errs.login.style.display='none'; resendLoginBtn.style.display='none';
      const email=$('#acct-login-email').value.trim();
      const password=$('#acct-login-pass').value;
      try{
        const data=await api('POST','/api/login',{email,password});
        setUser(data?.user||null);
        await forceSessionRefresh();
        closeModal();
      }catch(err){
        const code = (err && err.code) ? err.code : String(err);
        let msg = err.message || 'No se pudo iniciar sesi√≥n.';
        switch(code){
          case 'account_not_found':    msg='No encontramos ninguna cuenta con ese correo.'; resendLoginBtn.style.display='inline-flex'; break;
          case 'invalid_credentials':  msg='Correo o contrase√±a incorrectos.'; break;
          case 'password_not_set':     msg='Esta cuenta no tiene contrase√±a. Usa ‚Äú¬øOlvidaste la contrase√±a?‚Äù.'; break;
          case 'use_google_login':     msg='Este correo est√° registrado con Google. Inicia sesi√≥n con Google.'; break;
          case 'validation_error':
            msg = (err.fieldErrors?.email || err.fieldErrors?.password || 'Revisa los campos obligatorios.');
            break;
        }
        errs.login.textContent = msg;
        errs.login.style.display='block';
      }
    });

    /* ===== Submit: Registro ===== */
    forms.register?.addEventListener('submit', async e=>{
      e.preventDefault();
      errs.register.style.display='none'; okRegister.style.display='none'; resendRegisterBtn.style.display='none';
      const name=$('#acct-reg-name').value.trim();
      const email=$('#acct-reg-email').value.trim();
      const p1=$('#acct-reg-pass').value;
      const p2=$('#acct-reg-pass2').value;

      if(p1!==p2){ errs.register.textContent='Las contrase√±as no coinciden.'; errs.register.style.display='block'; return; }
      if(p1.length<6){ errs.register.textContent='La contrase√±a debe tener al menos 6 caracteres.'; errs.register.style.display='block'; return; }
      if(!name){ errs.register.textContent='El nombre es obligatorio.'; errs.register.style.display='block'; return; }

      try{
        const data=await api('POST','/api/register',{name,email,password:p1});
        okRegister.textContent = data?.message || 'Te enviamos un correo de verificaci√≥n. Revisa tu bandeja y el spam.';
        okRegister.style.display='block';
        resendRegisterBtn.style.display='inline-flex';
      }catch(err){
        const code = err.code || String(err);
        let msg = err.message || 'No se pudo crear la cuenta.';
        switch(code){
          case 'email_in_use_google': msg='Ese correo ya existe como cuenta Google. Inicia sesi√≥n con Google.'; break;
          case 'email_in_use':        msg='Ese correo ya tiene una cuenta. Inicia sesi√≥n.'; break;
          case 'weak_password':       msg='La contrase√±a debe tener al menos 6 caracteres.'; break;
          case 'validation_error':
            msg = (err.fieldErrors?.name || err.fieldErrors?.email || err.fieldErrors?.password || 'Revisa los campos obligatorios.');
            break;
        }
        errs.register.textContent = msg;
        errs.register.style.display='block';
      }
    });

    /* ===== Reenviar verificaci√≥n ===== */
    resendLoginBtn?.addEventListener('click', async ()=>{
      const email = ($('#acct-login-email').value||'').trim();
      errs.login.style.display='none';
      if(!email){ errs.login.textContent='Escribe tu correo y vuelve a intentar.'; errs.login.style.display='block'; return; }
      try{
        const d = await api('POST','/api/resend-verification',{email});
        okRegister.textContent = d?.message || 'Te enviamos un nuevo enlace de verificaci√≥n.';
        okRegister.style.display='block';
        setTab('register', true);
      }catch(err){
        errs.login.textContent = err.message || 'No pudimos reenviar el correo.';
        errs.login.style.display='block';
      }
    });

    resendRegisterBtn?.addEventListener('click', async ()=>{
      const email = ($('#acct-reg-email').value||'').trim();
      errs.register.style.display='none';
      if(!email){ errs.register.textContent='Escribe tu correo y vuelve a intentar.'; errs.register.style.display='block'; return; }
      try{
        const d = await api('POST','/api/resend-verification',{email});
        okRegister.textContent = d?.message || 'Te enviamos un nuevo enlace de verificaci√≥n.';
        okRegister.style.display='block';
      }catch(err){
        errs.register.textContent = err.message || 'No pudimos reenviar el correo.';
        errs.register.style.display='block';
      }
    });

    /* ===== Google OAuth: popup + polling ===== */
    function startGooglePolling(){
      if(S.polling) clearInterval(S.polling);
      let tries=0;
      S.polling = setInterval(async ()=>{
        tries++;
        try{
          const data = await api('GET','/api/session');
          if(data?.user){
            setUser(data.user);
            closeModal();
            clearInterval(S.polling);
            S.polling = null;
          }
        }catch{}
        if(tries>60){ clearInterval(S.polling); S.polling=null; }
      }, 2000);
    }
    function bindGoogle(id, from){
      const el = document.getElementById(id);
      if(!el) return;
      el.addEventListener('click', (e)=>{
        try{ sessionStorage.setItem('taply_from', from); }catch{}
        const url = `/api/google?from=${encodeURIComponent(from)}`;
        const w = window.open(url, '_blank', 'noopener,noreferrer');
        startGooglePolling();
        if(w) e.preventDefault();
      }, {capture:true});
    }
    bindGoogle('btn-google-login','login');
    bindGoogle('btn-google-register','register');

    /* ===== Forzar refresco de sesi√≥n tras login/OAuth ===== */
    async function forceSessionRefresh(retries=4, delay=600){
      for(let i=0;i<retries;i++){
        try{
          const data = await api('GET','/api/session');
          if(data?.user){ setUser(data.user); break; }
        }catch{}
        await new Promise(r=>setTimeout(r,delay));
      }
    }

    /* ===== Mapear errores Google v√≠a hash ===== */
    function mapGoogleError(code){
      switch(String(code||'').toLowerCase()){
        case 'email_in_use_password': return 'Ese correo ya tiene una cuenta con contrase√±a. Inicia sesi√≥n con tu contrase√±a.';
        case 'email_in_use_google':   return 'Ese correo ya est√° registrado con Google. Inicia sesi√≥n con Google.';
        case 'email_in_use':          return 'Ese correo ya est√° en uso.';
        case 'use_password_login':    return 'Esa cuenta no est√° vinculada a Google. Usa correo y contrase√±a.';
        case 'not_registered':        return 'No existe ninguna cuenta registrada con ese Google. Reg√≠strate primero.';
        case 'email_not_verified':    return 'Tu correo de Google no est√° verificado.';
        case 'state_error':           return 'Error de seguridad (state). Int√©ntalo de nuevo.';
        case 'google_auth_failed':    return 'No se pudo completar con Google. Int√©ntalo otra vez.';
        case 'server_error':          return 'Error del servidor. Intenta de nuevo.';
        default:                      return 'No se pudo completar con Google. Int√©ntalo otra vez.';
      }
    }
    async function handleGoogleHash(){
      const raw = (location.hash || '').replace(/^#/, '');
      if(!raw) return;
      const params = new URLSearchParams(raw.replace(/;/g,'&'));
      const g = params.get('google'); // ok | err
      const code = params.get('code');
      let from = (params.get('from') || sessionStorage.getItem('taply_from') || 'login').toLowerCase();
      try{ sessionStorage.removeItem('taply_from'); }catch{}
      if (g === 'ok') {
        await forceSessionRefresh();
        history.replaceState(null,'',location.pathname + location.search);
        return;
      }
      if (g === 'err') {
        openModal(from === 'register' ? 'register' : 'login');
        const target = (from === 'register') ? errs.register : errs.login;
        if (target){ target.textContent = mapGoogleError(code); target.style.display = 'block'; }
        history.replaceState(null,'',location.pathname + location.search);
      }
    }

    /* ===== Cargar sesi√≥n y auto-abrir modal si hash ===== */
    async function getSession(){
      try{
        const v = localStorage.getItem('acct_user') || '';
        setUser(v ? JSON.parse(v) : null);
      }catch{ setUser(null); }

      try{
        const data = await api('GET','/api/session');
        setUser(data?.user || null);
      }catch{}

      await handleGoogleHash();
    }

    getSession();
    window.TaplyOpenLogin = openModal;

    if (AUTH_HASHES.includes(location.hash)) {
      openModal(location.hash.replace('#auth-',''));
    }
  })();
</script>
</html>
